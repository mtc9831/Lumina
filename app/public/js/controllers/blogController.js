var ObjectID=require("mongodb").ObjectID,mongoose=require("mongoose"),BlogPostModel=mongoose.model("BlogPost"),exports=module.exports={};exports.posts=function(a,c){return BlogPostModel.find(function(a,e){a?console.log(a):c.json(e)})};exports.post=function(a,c){var b=a.params.id;b&&BlogPostModel.findById(b,function(a,b){a?console.log(a):b?c.json({post:b,status:!0}):c.json({status:!1})})};
exports.addPost=function(a,c){var b=a.body,b=new BlogPostModel({title:a.body.title,author:a.body.author,postText:a.body.postText});b.save(function(a){a?(console.log(a),c.json(!1)):c.json(!0)});return c.jsonp(a.body)};exports.editPost=function(a,c){var b=a.params.id;b&&BlogPostModel.findById(b,function(b,d){d.title=a.body.title;d.author=a.body.author;d.postText=a.body.postText;d.save(function(a){a?(c.json(!1),console.log(a)):c.json(!0)})})};
exports.deletePost=function(a,c){var b=a.params.id;b&&BlogPostModel.findById(b,function(a,b){b.remove(function(a){a?(c.json(!1),console.log(a)):c.json(!0)})})};
